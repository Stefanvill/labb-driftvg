pipeline {
    agent any

    stages {
        stage('Bygg') {
            steps {
                echo 'KÃ¶r Maven build...'
                sh './mvnw clean package'
            }
        }
        stage('Test') {
            steps {
                echo 'KÃ¶r tester...'
                sh './mvnw test'
            }
            post {
                always {
                    junit 'target/surefire-reports/*.xml'
                }
            }
        }
    }

    post {
        success {
            echo 'Bygg lyckades! ðŸŽ‰'
            archiveArtifacts artifacts: 'target/*.jar', allowEmptyArchive: true
        }
        failure {
            echo 'Bygg misslyckades! ðŸ˜ž'
        }
    }
}
